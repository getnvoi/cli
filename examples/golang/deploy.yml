application:
  name: example-golang
  environment: production

  # Provider configuration
  domain_provider:
    cloudflare:
      api_token: $CLOUDFLARE_API_TOKEN
      account_id: $CLOUDFLARE_ACCOUNT_ID

  compute_provider:
    hetzner:
      api_token: $HETZNER_API_TOKEN
      server_type: cx22 # Explicit server type
      server_location: fsn1 # Explicit location

  # Server configuration (single server, master: true is implicit)
  servers:
    master:
      type: cx22
      location: fsn1
      volumes:
        appdata:
          size: 10

  # Container retention
  keep_count: 2

  app:
    web:
      servers: [master]
      domain: rb.run # Your domain (must be on Cloudflare)
      subdomain: golang # Subdomain for this app
      port: 3000

      # Nested health check configuration
      healthcheck:
        type: http
        path: /health
        port: 3000
        interval: 10s
        timeout: 5s
        retries: 3

      # Mount server volume for SQLite data persistence
      mounts:
        appdata: /app/data

  # SQLite database (adapter specified, no mount needed - uses app's data directory)
  database:
    servers: [master]
    adapter: sqlite3

  env:
    APP_NAME: nvoi-example-app
    LOG_LEVEL: info
    GIN_MODE: release
